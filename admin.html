<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />

	<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		.bd-placeholder-img {
			font-size: 1.125rem;
			text-anchor: middle;
			-webkit-user-select: none;
			-moz-user-select: none;
			user-select: none;
		}

		@media (min-width: 768px) {
			.bd-placeholder-img-lg {
				font-size: 3.5rem;
			}
		}
	</style>
</head>

<body>
	<div class="container">
		<main>
			<div class="py-5 text-center">
				<h2>Мастер-интерпретатор</h2>
				<p class="lead">Страница для управления хранилищем цитат (создание, удаление)</p>
			</div>
			<form name="">
				<label for="firstName" class="form-label">First name</label>
				<input type="text" class="js-category form-control" placeholder="Enter categoty"></input>

				<label for="firstName" class="form-label">First name</label>
				<input type="text" class="js-text form-control" placeholder="Enter quote"></input>

				<label for="firstName" class="form-label">First name</label>
				<input type="text" class="js-tag form-control" placeholder="Enter tag"></input>

				<label for="firstName" class="form-label">First name</label>
				<input type="text" class="js-author form-control" placeholder="Enter author"></input>

				<label for="firstName" class="form-label">First name</label>
				<input type="text" class="js-country form-control" placeholder="Enter country"></input>

				<label for="firstName" class="form-label">First name</label>
				<input type="text" class="js-year form-control" placeholder="Enter year"></input>

				<input type="button" class="save btn btn-primary btn-lg btn-block" value="Save" />
			</form>
			<table class="table table-striped">
				<thead>
					<tr>
						<th scope="col">Категория</th>
						<th scope="col">Цитата</th>
						<th scope="col">Тег</th>
						<th scope="col">Страна</th>
						<th scope="col">Год</th>
						<th scope="col"></th>
					</tr>
				</thead>
			</table>
		</main>
	</div>
	<script type="module">
		import QuoteStorage from './model/quoteStorage.js'
		import QuoteCart from './model/quoteCart.js'
		import Table from './table.js'

		let tBody = new Table();
		let table = document.querySelector('table');
		table.appendChild(tBody.tbody);

		let saveButton = document.querySelector('.save');
		saveButton.addEventListener('click', () => {
			let category = getNodeValue('.js-category');
			let text = getNodeValue('.js-text');
			let tag = getNodeValue('.js-tag');
			let author = getNodeValue('.js-author');
			let country = getNodeValue('.js-country');
			let year = getNodeValue('.js-year');

			let quoteCart = new QuoteCart(category, text, tag, author, country, year);
			let quoteStorage = new QuoteStorage();
			quoteStorage.saveNewQuote(quoteCart);
			tBody.addRow(quoteCart);

			function getNodeValue(className) {
				return document.querySelector(className).value;
			}
		});

	</script>
</body>

</html>